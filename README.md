# 2024-百团招新小游戏（基于马尔可夫过程的赌徒输光模型）
## 理论讲解

## 理论讲解

对赌的问题是在概率论研究中的经典模型，数学期望的概念就是在研究两人对赌中断时候分钱的方案中产生，接下来让我们看一个经典案例。

如果甲乙两人对赌，资金共计为 $\m\$，直到一个人输光结束。这是一个马尔可夫过程（带两个吸收壁的随机游走），状态集 $\S=\{0,1,2, \ldots, m\}\$ ，当 \(i \neq 0, m\) 时，转移函数满足 \(p_{i, i-1}=q, p_{i, i+1}=p\) 并且 \(p+q=1\)，而 \(0, m\) 作为吸收态满足 \(p_{00}=p_{mm}=1\)。

不妨设定到 \(m\) 为甲胜利，吸收到 \(0\) 为甲失败，以下讨论初始状态为 \(i\) 时，最终的成功概率 \(a_i\)。

对于成功的概率，显然有边界条件 \(a_0=0, a_m=1\) 以及递推关系 \(a_i=(1-p) a_{i-1}+p a_{i+1}\)，整理得 \((1-p)(a_i-a_{i-1})=p(a_{i+1}-a_i)\)。

令 \(\delta_i=a_{i+1}-a_i, \rho=\frac{1-p}{p}\) ，得到 \(\delta_i=\rho^i \delta_0\)。利用 \(\sum_{i=0}^m \delta_i=1\) 推出 \(\delta_0=\frac{1}{1+\rho+\cdots+\rho^{m-1}}\)，从而化简得到 

$$
a_i=\frac{1+\rho+\cdots+\rho^{i-1}}{1+\rho+\cdots+\rho^{m-1}} 
$$ 

即：

$$
a_i=\begin{cases}
\frac{1-\rho^i}{1-\rho^m} & \text{如果 } \rho \neq 1 \\
\frac{i}{m} & \text{如果 } \rho=1
\end{cases}
$$
